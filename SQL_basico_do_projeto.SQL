CREATE DATABASE PROJETO;

USE PROJETO;
--  tabelas b√°sicas - FEITO
-- Hierarquia de tabelas- FEITO
-- popular tabelas
-- triggers
-- procedures
-- views
-- users

CREATE TABLE USUARIO(
    ID_CONTA INT AUTO_INCREMENT PRIMARY KEY,
    EMAIL VARCHAR(50) UNIQUE NOT NULL,
    SENHA VARCHAR(40) NOT NULL,
    TELEFONE VARCHAR(20) NOT NULL,
    ADM BIT DEFAULT 0,
    DESCRICAO_USER VARCHAR(150)
);

CREATE TABLE TAGS(
    ID_TAG INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(50) NOT NULL
);

CREATE TABLE POST(
    ID_POST INT AUTO_INCREMENT,
    ID_CONTA INT,
    TITULO VARCHAR(30)  NOT NULL,
    DESCRICAO VARCHAR(200)  NOT NULL,
    VALOR FLOAT NOT NULL,
    DOACAO VARCHAR(50),
    CONTATO VARCHAR(255)  NOT NULL,
    POST_DATE DATETIME NOT NULL DEFAULT NOW(),
    APROVADO BIT DEFAULT 0,
    REPUTACAO INT DEFAULT 0,
    PRIMARY KEY (ID_POST, ID_CONTA),
    FOREIGN KEY (ID_CONTA) REFERENCES USUARIO(ID_CONTA)
);

CREATE TABLE POST_TAG(
    ID_POST INT  NOT NULL,
    ID_TAG INT  NOT NULL,
    FOREIGN KEY (ID_POST) REFERENCES POST(ID_POST),
    FOREIGN KEY (ID_TAG) REFERENCES TAGS(ID_TAG)
);
insert into USUARIO (ID_CONTA, EMAIL, SENHA, TELEFONE, DESCRICAO_USER) values (null, 'a@a.cum', 'b', '123', 'desc');
insert into TAGS values (null, 'animal');
insert into TAGS values (null, 'humanitario');
insert into post (ID_POST, ID_CONTA, TITULO, DESCRICAO, VALOR, DOACAO, CONTATO) values (null, 1, 'a', 'b', 50, '','c');
insert into POST_TAG values (1,1);
insert into POST_TAG values (1,2);